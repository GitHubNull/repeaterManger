# Enhanced Repeater Manager 使用指南

本文档提供了 Enhanced Repeater Manager 插件的详细使用说明，帮助您更高效地利用插件功能进行安全测试。

## 目录

1. [界面布局](#界面布局)
2. [基本操作](#基本操作)
3. [高级功能](#高级功能)
4. [数据持久化](#数据持久化)
5. [故障排除](#故障排除)

## 界面布局

Enhanced Repeater Manager 的主界面分为两个主要选项卡：**请求管理**和**配置**。

### 请求管理选项卡

请求管理选项卡分为三个主要区域：

1. **左侧区域**：请求列表面板
   - 显示所有保存的请求
   - 包含搜索框和高级搜索按钮
   - 表格显示请求的URL、方法、状态码等信息
   - 支持列显示控制（显示/隐藏特定列）
   - 右键菜单提供复制、删除等操作

2. **右上区域**：请求编辑和响应查看面板
   - 请求编辑区域：修改请求头和请求体
   - 响应查看区域：查看响应内容
   - 支持多种布局切换
   - 包含发送按钮和超时设置

3. **右下区域**：历史记录面板
   - 显示当前选中请求的所有历史响应
   - 包含状态码、响应大小、响应时间等信息
   - 支持搜索和高级过滤
   - 右键菜单提供更多操作

### 配置选项卡

配置选项卡包含以下设置区域：

1. **数据库配置**
   - 设置数据库文件保存路径
   - 修改数据库文件名
   - 测试数据库连接

2. **自动保存设置**
   - 启用/禁用自动保存功能
   - 设置自动保存间隔时间

3. **数据导入导出**
   - SQLite格式导入/导出
   - JSON格式导入/导出
   - 导出路径设置

## 基本操作

### 添加请求

有多种方式可以将请求添加到 Enhanced Repeater Manager：

1. **从Burp其他组件发送**
   - 在Proxy、Target或其他Burp组件中右键点击请求
   - 选择"发送到Enhanced Repeater"选项

2. **手动创建新请求**
   - 在主界面点击"新建请求"按钮
   - 在弹出的编辑器中输入请求详情

3. **从历史记录或Proxy历史导入**
   - 在主界面点击"从历史导入"按钮
   - 选择要导入的请求

### 编辑和发送请求

1. **编辑请求**
   - 在左侧列表中选择一个请求
   - 在右上区域的编辑器中修改请求内容
   - 支持修改请求方法、URL、头部和正文

2. **发送请求**
   - 点击"发送"按钮或使用快捷键(Ctrl+Enter)
   - 可以设置请求超时时间
   - 发送后自动在历史记录中添加结果

3. **查看响应**
   - 发送请求后，响应会显示在右上区域
   - 支持查看原始响应或渲染后的响应

### 管理历史记录

1. **查看历史记录**
   - 选择左侧的请求后，右下区域会显示所有历史记录
   - 每条记录包含状态码、响应大小、时间等信息

2. **比较响应**
   - 在历史记录中选择两个响应
   - 右键菜单选择"比较响应"
   - 查看两次响应的差异

3. **搜索和过滤**
   - 使用历史记录面板顶部的搜索框
   - 点击"高级搜索"可以设置多条件过滤

## 高级功能

### 列显示控制

1. 点击表格上方的"显示/隐藏列"按钮
2. 在弹出的对话框中勾选需要显示的列
3. 点击"应用"按钮保存设置

### 高级搜索

1. 点击请求列表或历史记录面板上方的"高级搜索"按钮
2. 在弹出的对话框中设置搜索条件：
   - URL包含特定字符串
   - 请求方法(GET, POST等)
   - 状态码范围
   - 响应大小范围
   - 响应时间范围
   - 包含特定响应头
   - 包含特定响应内容
3. 支持组合多个条件(AND/OR)
4. 点击"搜索"按钮应用过滤

### 请求颜色标记

1. 在请求列表中右键点击请求
2. 选择"设置颜色"选项
3. 从颜色选择器中选择一个颜色
4. 已标记颜色的请求在列表中会以相应颜色显示

### 请求备注

1. 在请求列表中右键点击请求
2. 选择"添加备注"选项
3. 在弹出的对话框中输入备注内容
4. 备注会显示在请求列表的备注列中

## 数据持久化

### 数据库配置

1. 切换到"配置"选项卡
2. 在数据库配置区域可以：
   - 查看当前数据库路径
   - 修改数据库保存位置
   - 修改数据库文件名
   - 测试数据库连接

### 自动保存设置

1. 在"配置"选项卡的自动保存区域
2. 勾选"启用自动保存"复选框
3. 设置自动保存间隔时间(秒)
4. 点击"应用"保存设置

### 数据导出

1. 在"配置"选项卡的数据导出区域
2. 选择导出格式：
   - SQLite(完整数据库文件)
   - JSON(结构化数据)
3. 点击"浏览"按钮选择导出位置
4. 点击"导出"按钮开始导出

### 数据导入

1. 在"配置"选项卡的数据导入区域
2. 选择导入格式(SQLite或JSON)
3. 点击"浏览"按钮选择要导入的文件
4. 选择导入模式：
   - 替换现有数据
   - 合并(保留ID不同的记录)
   - 仅添加新记录
5. 点击"导入"按钮开始导入

## 故障排除

### 常见问题

1. **数据库连接失败**
   - 确保数据库路径有效且有写入权限
   - 检查是否有其他程序锁定了数据库文件
   - 尝试在配置面板中点击"测试连接"

2. **导出数据失败**
   - 确保目标文件夹有写入权限
   - 确保数据库文件存在且未损坏
   - 检查磁盘空间是否充足

3. **导入数据失败**
   - 确保源文件格式正确
   - 检查文件是否完整未损坏
   - 尝试不同的导入模式

4. **请求发送失败**
   - 检查网络连接
   - 增加超时时间
   - 检查请求格式是否正确

### 日志

插件日志可以在Burp Suite的Extender选项卡查看，常见的错误消息及解决方法：

- `数据库初始化失败`: 检查数据库路径和权限
- `自动保存服务启动失败`: 检查数据库连接
- `导出数据失败: 源数据库文件不存在`: 确保已创建数据库文件
- `导入数据失败: 格式错误`: 检查源文件格式

### 恢复默认设置

如果遇到无法解决的问题，可以尝试恢复默认设置：

1. 关闭Burp Suite
2. 删除配置文件(`~/.burp/repeater_manager_config.properties`)
3. 重新启动Burp Suite并加载插件

## 键盘快捷键

- `Ctrl+Enter`: 发送请求
- `Ctrl+N`: 新建请求
- `Ctrl+S`: 保存当前请求
- `Ctrl+F`: 在当前面板中搜索
- `Ctrl+Tab`: 切换选项卡
- `F5`: 刷新请求列表

## 最佳实践

1. **定期导出数据**
   - 定期导出数据作为备份
   - 导出之前先检查数据库状态

2. **使用颜色标记和备注**
   - 为不同类型的请求使用不同颜色
   - 使用备注记录请求的用途和关键信息

3. **组织请求**
   - 使用URL前缀或备注对请求分类
   - 定期清理不再需要的请求

4. **合理设置自动保存**
   - 根据操作频率调整自动保存间隔
   - 频繁操作时可适当延长间隔减少I/O负担 